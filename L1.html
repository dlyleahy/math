<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the board grid */
        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 8px; /* Gap between cells */
        }
        .cell {
            width: 100px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .cell:not(.disabled):hover {
            background-color: #e5e7eb; /* Gray-100 */
        }
        @media (max-width: 640px) {
            .cell {
                width: 10vw;
                height: 10vw;
                max-width: 120px;
                max-height: 120px;
                min-width: 80px;
                min-height: 80px;
            }
        }
        .cell-content svg {
            width: 70%;
            height: 70%;
            pointer-events: none; /* Ignore clicks on the SVG itself */
        }

        /* Animation for X and O */
        .cell-content {
            opacity: 0;
            animation: fadeIn 0.3s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4 font-sans">

    <div id="game-container" class="bg-white p-6 md:p-10 rounded-xl shadow-2xl w-full max-w-sm">

        <h1 class="text-3xl font-extrabold text-gray-800 text-center mb-6 tracking-tight">
            Tic-Tac-Toe
        </h1>

        <div id="status" class="text-lg font-semibold text-center mb-6 h-6">
            <!-- Game status will be updated here -->
        </div>

        <!-- The 3x3 Game Board -->
        <div id="board" class="board bg-gray-300 p-2 rounded-lg">
            <!-- Cells will be generated by JavaScript -->
        </div>

        <!-- Reset Button -->
        <button id="reset-button"
                class="mt-8 w-full py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 transition duration-150 transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50">
            Reset Game
        </button>

    </div>

    <script>
        // --- GAME VARIABLES ---
        const WINNING_COMBINATIONS = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
            [0, 4, 8], [2, 4, 6]             // Diagonals
        ];

        let boardState = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let isGameActive = true;
        const boardElement = document.getElementById('board');
        const statusElement = document.getElementById('status');
        const resetButton = document.getElementById('reset-button');
        
        // --- ASSET DEFINITIONS (SVG ICONS) ---

        // Inline SVG for 'X'
        const X_SVG = `
            <svg xmlns="http://www.w3.org/2000/svg" class="text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        `;

        // Inline SVG for 'O'
        const O_SVG = `
            <svg xmlns="http://www.w3.org/2000/svg" class="text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
            </svg>
        `;


        // --- CORE FUNCTIONS ---

        // 1. Initialize or Reset the Game Board
        function initializeGame() {
            boardState = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = 'X';
            isGameActive = true;
            boardElement.innerHTML = ''; // Clear previous cells
            updateStatus(`Player ${currentPlayer}'s turn`);

            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell', 'bg-white', 'rounded-md', 'shadow-sm', 'text-4xl', 'font-bold');
                cell.setAttribute('data-index', i);
                cell.addEventListener('click', handleCellClick);
                
                // Add a wrapper for the content to handle the fade animation
                const contentWrapper = document.createElement('div');
                contentWrapper.classList.add('cell-content', 'w-full', 'h-full', 'flex', 'justify-center', 'items-center');
                cell.appendChild(contentWrapper);

                boardElement.appendChild(cell);
            }
        }

        // 2. Update the Game Status Message
        function updateStatus(message) {
            statusElement.textContent = message;
        }

        // 3. Check for Winner
        function checkResult() {
            let roundWon = false;
            let winningCells = [];

            for (let i = 0; i < WINNING_COMBINATIONS.length; i++) {
                const [a, b, c] = WINNING_COMBINATIONS[i];
                
                // Check if all three cells are occupied by the same player
                if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) {
                    roundWon = true;
                    winningCells = [a, b, c];
                    break;
                }
            }

            if (roundWon) {
                isGameActive = false;
                updateStatus(`Player ${currentPlayer} Wins!`);
                highlightWinningCells(winningCells);
                return;
            }

            // Check for Draw (if no winner and no empty spaces left)
            if (!boardState.includes('')) {
                isGameActive = false;
                updateStatus('Game Draw!');
                return;
            }
        }

        // 4. Highlight the Winning Cells
        function highlightWinningCells(indices) {
            const cells = boardElement.querySelectorAll('.cell');
            indices.forEach(index => {
                cells[index].classList.remove('bg-white');
                cells[index].classList.add('bg-yellow-400', 'ring-4', 'ring-yellow-600', 'scale-105', 'transform', 'z-10');
            });
        }

        // 5. Handle a Cell Click
        function handleCellClick(event) {
            if (!isGameActive) return;

            const clickedCell = event.currentTarget;
            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));

            // Check if the cell is already occupied
            if (boardState[clickedCellIndex] !== '') {
                // Cell occupied, do nothing
                return;
            }

            // Update the model (boardState)
            boardState[clickedCellIndex] = currentPlayer;

            // Update the view (cell content)
            const contentWrapper = clickedCell.querySelector('.cell-content');
            contentWrapper.innerHTML = currentPlayer === 'X' ? X_SVG : O_SVG;
            // Force reflow/restart animation
            contentWrapper.style.animation = 'none';
            void contentWrapper.offsetHeight; 
            contentWrapper.style.animation = null;

            clickedCell.classList.add('disabled'); // Disable further clicks on this cell

            // Check for game end conditions
            checkResult();

            // Switch players only if the game is still active
            if (isGameActive) {
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                updateStatus(`Player ${currentPlayer}'s turn`);
            }
        }

        // 6. Setup Event Listeners and Initial State
        resetButton.addEventListener('click', initializeGame);

        // Start the game on page load
        window.onload = initializeGame;

    </script>
</body>
</html>
